#include <stdio.h>
#include <string.h>
#include <stdlib.h>

void welcome(void){
    
printf("███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████\n");
printf("█░░░░░░██████████░░░░░░█░░░░░░░░░░░░░░█░░░░░░█████████░░░░░░░░░░░░░░█░░░░░░░░░░░░░░█░░░░░░██████████░░░░░░█░░░░░░░░░░░░░░████░░░░░░░░░░░░░░█░░░░░░░░░░░░░░█\n");
printf("█░░▄▀░░██████████░░▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀░░█████████░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀░░░░░░░░░░░░░░▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░████░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█\n");
printf("█░░▄▀░░██████████░░▄▀░░█░░▄▀░░░░░░░░░░█░░▄▀░░█████████░░▄▀░░░░░░░░░░█░░▄▀░░░░░░▄▀░░█░░▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀░░█░░▄▀░░░░░░░░░░████░░░░░░▄▀░░░░░░█░░▄▀░░░░░░▄▀░░█\n");
printf("█░░▄▀░░██████████░░▄▀░░█░░▄▀░░█████████░░▄▀░░█████████░░▄▀░░█████████░░▄▀░░██░░▄▀░░█░░▄▀░░░░░░▄▀░░░░░░▄▀░░█░░▄▀░░████████████████░░▄▀░░█████░░▄▀░░██░░▄▀░░█\n");
printf("█░░▄▀░░██░░░░░░██░░▄▀░░█░░▄▀░░░░░░░░░░█░░▄▀░░█████████░░▄▀░░█████████░░▄▀░░██░░▄▀░░█░░▄▀░░██░░▄▀░░██░░▄▀░░█░░▄▀░░░░░░░░░░████████░░▄▀░░█████░░▄▀░░██░░▄▀░░█\n");
printf("█░░▄▀░░██░░▄▀░░██░░▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀░░█████████░░▄▀░░█████████░░▄▀░░██░░▄▀░░█░░▄▀░░██░░▄▀░░██░░▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░████████░░▄▀░░█████░░▄▀░░██░░▄▀░░█\n");
printf("█░░▄▀░░██░░▄▀░░██░░▄▀░░█░░▄▀░░░░░░░░░░█░░▄▀░░█████████░░▄▀░░█████████░░▄▀░░██░░▄▀░░█░░▄▀░░██░░░░░░██░░▄▀░░█░░▄▀░░░░░░░░░░████████░░▄▀░░█████░░▄▀░░██░░▄▀░░█\n");
printf("█░░▄▀░░░░░░▄▀░░░░░░▄▀░░█░░▄▀░░█████████░░▄▀░░█████████░░▄▀░░█████████░░▄▀░░██░░▄▀░░█░░▄▀░░██████████░░▄▀░░█░░▄▀░░████████████████░░▄▀░░█████░░▄▀░░██░░▄▀░░█\n");
printf("█░░▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀░░█░░▄▀░░░░░░░░░░█░░▄▀░░░░░░░░░░█░░▄▀░░░░░░░░░░█░░▄▀░░░░░░▄▀░░█░░▄▀░░██████████░░▄▀░░█░░▄▀░░░░░░░░░░████████░░▄▀░░█████░░▄▀░░░░░░▄▀░░█\n");
printf("█░░▄▀░░░░░░▄▀░░░░░░▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀░░██████████░░▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░████████░░▄▀░░█████░░▄▀▄▀▄▀▄▀▄▀░░█\n");
printf("█░░░░░░██░░░░░░██░░░░░░█░░░░░░░░░░░░░░█░░░░░░░░░░░░░░█░░░░░░░░░░░░░░█░░░░░░░░░░░░░░█░░░░░░██████████░░░░░░█░░░░░░░░░░░░░░████████░░░░░░█████░░░░░░░░░░░░░░█\n");
printf("███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████\n");
printf("███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████\n");
printf("█░░░░░░░░░░░░███░░░░░░░░░░░░░░█░░░░░░██░░░░░░█░░░░░░░░░░█░░░░░░█████████░░░░░░░░░░░░░░████░░░░░░░░░░░░░░█░░░░░░██████████░░░░░░█░░░░░░░░░░░░███\n");
printf("█░░▄▀▄▀▄▀▄▀░░░░█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀░░██░░▄▀░░█░░▄▀▄▀▄▀░░█░░▄▀░░█████████░░▄▀▄▀▄▀▄▀▄▀░░████░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀░░░░░░░░░░██░░▄▀░░█░░▄▀▄▀▄▀▄▀░░░░█\n");
printf("█░░▄▀░░░░▄▀▄▀░░█░░▄▀░░░░░░░░░░█░░▄▀░░██░░▄▀░░█░░░░▄▀░░░░█░░▄▀░░█████████░░▄▀░░░░░░░░░░████░░▄▀░░░░░░▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░██░░▄▀░░█░░▄▀░░░░▄▀▄▀░░█\n");
printf("█░░▄▀░░██░░▄▀░░█░░▄▀░░█████████░░▄▀░░██░░▄▀░░███░░▄▀░░███░░▄▀░░█████████░░▄▀░░████████████░░▄▀░░██░░▄▀░░█░░▄▀░░░░░░▄▀░░██░░▄▀░░█░░▄▀░░██░░▄▀░░█\n");
printf("█░░▄▀░░██░░▄▀░░█░░▄▀░░░░░░░░░░█░░▄▀░░██░░▄▀░░███░░▄▀░░███░░▄▀░░█████████░░▄▀░░░░░░░░░░████░░▄▀░░░░░░▄▀░░█░░▄▀░░██░░▄▀░░██░░▄▀░░█░░▄▀░░██░░▄▀░░█\n");
printf("█░░▄▀░░██░░▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀░░██░░▄▀░░███░░▄▀░░███░░▄▀░░█████████░░▄▀▄▀▄▀▄▀▄▀░░████░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀░░██░░▄▀░░██░░▄▀░░█░░▄▀░░██░░▄▀░░█\n");
printf("█░░▄▀░░██░░▄▀░░█░░▄▀░░░░░░░░░░█░░▄▀░░██░░▄▀░░███░░▄▀░░███░░▄▀░░█████████░░▄▀░░░░░░░░░░████░░▄▀░░░░░░▄▀░░█░░▄▀░░██░░▄▀░░██░░▄▀░░█░░▄▀░░██░░▄▀░░█\n");
printf("█░░▄▀░░██░░▄▀░░█░░▄▀░░█████████░░▄▀▄▀░░▄▀▄▀░░███░░▄▀░░███░░▄▀░░█████████░░▄▀░░████████████░░▄▀░░██░░▄▀░░█░░▄▀░░██░░▄▀░░░░░░▄▀░░█░░▄▀░░██░░▄▀░░█\n");
printf("█░░▄▀░░░░▄▀▄▀░░█░░▄▀░░░░░░░░░░█░░░░▄▀▄▀▄▀░░░░█░░░░▄▀░░░░█░░▄▀░░░░░░░░░░█░░▄▀░░░░░░░░░░████░░▄▀░░██░░▄▀░░█░░▄▀░░██░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀░░░░▄▀▄▀░░█\n");
printf("█░░▄▀▄▀▄▀▄▀░░░░█░░▄▀▄▀▄▀▄▀▄▀░░███░░░░▄▀░░░░███░░▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░████░░▄▀░░██░░▄▀░░█░░▄▀░░██░░░░░░░░░░▄▀░░█░░▄▀▄▀▄▀▄▀░░░░█\n");
printf("█░░░░░░░░░░░░███░░░░░░░░░░░░░░█████░░░░░░█████░░░░░░░░░░█░░░░░░░░░░░░░░█░░░░░░░░░░░░░░████░░░░░░██░░░░░░█░░░░░░██████████░░░░░░█░░░░░░░░░░░░███\n");
printf("███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████\n");
printf("██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████\n");
printf("█░░░░░░░░░░░░░░█░░░░░░░░░░░░░░░░███░░░░░░░░░░█░░░░░░░░░░░░░░█░░░░░░░░░░░░░░█░░░░░░░░░░░░░░████░░░░░░░░░░░░░░█░░░░░░░░░░░░░░█░░░░░░██████████░░░░░░█░░░░░░░░░░░░░░█\n");
printf("█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀▄▀░░███░░▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░████░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀░░░░░░░░░░░░░░▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█\n");
printf("█░░▄▀░░░░░░▄▀░░█░░▄▀░░░░░░░░▄▀░░███░░░░▄▀░░░░█░░▄▀░░░░░░░░░░█░░▄▀░░░░░░░░░░█░░░░░░▄▀░░░░░░████░░▄▀░░░░░░░░░░█░░▄▀░░░░░░▄▀░░█░░▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀░░█░░▄▀░░░░░░░░░░█\n");
printf("█░░▄▀░░██░░▄▀░░█░░▄▀░░████░░▄▀░░█████░░▄▀░░███░░▄▀░░█████████░░▄▀░░█████████████░░▄▀░░████████░░▄▀░░█████████░░▄▀░░██░░▄▀░░█░░▄▀░░░░░░▄▀░░░░░░▄▀░░█░░▄▀░░█████████\n");
printf("█░░▄▀░░░░░░▄▀░░█░░▄▀░░░░░░░░▄▀░░█████░░▄▀░░███░░▄▀░░░░░░░░░░█░░▄▀░░░░░░░░░░█████░░▄▀░░████████░░▄▀░░█████████░░▄▀░░░░░░▄▀░░█░░▄▀░░██░░▄▀░░██░░▄▀░░█░░▄▀░░░░░░░░░░█\n");
printf("█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀▄▀░░█████░░▄▀░░███░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█████░░▄▀░░████████░░▄▀░░██░░░░░░█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀░░██░░▄▀░░██░░▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█\n");
printf("█░░▄▀░░░░░░░░░░█░░▄▀░░░░░░▄▀░░░░█████░░▄▀░░███░░▄▀░░░░░░░░░░█░░░░░░░░░░▄▀░░█████░░▄▀░░████████░░▄▀░░██░░▄▀░░█░░▄▀░░░░░░▄▀░░█░░▄▀░░██░░░░░░██░░▄▀░░█░░▄▀░░░░░░░░░░█\n");
printf("█░░▄▀░░█████████░░▄▀░░██░░▄▀░░███████░░▄▀░░███░░▄▀░░█████████████████░░▄▀░░█████░░▄▀░░████████░░▄▀░░██░░▄▀░░█░░▄▀░░██░░▄▀░░█░░▄▀░░██████████░░▄▀░░█░░▄▀░░█████████\n");
printf("█░░▄▀░░█████████░░▄▀░░██░░▄▀░░░░░░█░░░░▄▀░░░░█░░▄▀░░░░░░░░░░█░░░░░░░░░░▄▀░░█████░░▄▀░░████████░░▄▀░░░░░░▄▀░░█░░▄▀░░██░░▄▀░░█░░▄▀░░██████████░░▄▀░░█░░▄▀░░░░░░░░░░█\n");
printf("█░░▄▀░░█████████░░▄▀░░██░░▄▀▄▀▄▀░░█░░▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█████░░▄▀░░████████░░▄▀▄▀▄▀▄▀▄▀░░█░░▄▀░░██░░▄▀░░█░░▄▀░░██████████░░▄▀░░█░░▄▀▄▀▄▀▄▀▄▀░░█\n");
printf("█░░░░░░█████████░░░░░░██░░░░░░░░░░█░░░░░░░░░░█░░░░░░░░░░░░░░█░░░░░░░░░░░░░░█████░░░░░░████████░░░░░░░░░░░░░░█░░░░░░██░░░░░░█░░░░░░██████████░░░░░░█░░░░░░░░░░░░░░█\n");
printf("██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████\n");
}

void reset_game(char a[], char c[], int *ch) {
    a[0] = a[1] = a[2] = 'p';
    a[3] = a[4] = a[5] = 'd';
    for (int i = 0; i < 6; i++) {
        c[i] = 0;
    }
    *ch = 0;
}

int is_game_over(char a[], char c[]) {
    int p1 = 0, d1 = 0, p2 = 0, d2 = 0;
    for (int i = 0; i < 6; i++) {
        if (a[i] == 'p') p2++;
        if (a[i] == 'd') d2++;
        if (c[i] == 'p') p1++;
        if (c[i] == 'd') d1++;
    }
    // Check if devils are more than priests on any side
    if ((p1 > 0 && d1 > p1) || (p2 > 0 && d2 > p2)) {
        return 1;
    }
    return 0;
}

void print_game_state(char a[], char c[]) {
    printf("\nDame : {");
    for (int i = 0; i < 6; i++) {
        if (a[i] != '0') {
            printf("%c ", a[i]);
        }
    }
    printf("}  Ground : {");
    for (int i = 0; i < 6; i++) {
        if (c[i] != '0') {
            printf("%c ", c[i]);
        }
    }
    printf("}\n");
}

int main() {
    char a[] = {'p', 'p', 'p', 'd', 'd', 'd'}, c[6] = {'0', '0', '0', '0', '0', '0'}, b[2]; 
    int ch = 0, i, j, p1, p2, d1, d2;

    while (1) {
        welcome();

        while (1) {
            print_game_state(a, c);

            printf("\nIn Boat: ");
            scanf(" %c %c", b, b+1); // Taking input for boat

            p1 = 0, d1 = 0;
            for (i = 0; i < 2; i++) {
                if (b[i] == 'p') p1++;
                if (b[i] == 'd') d1++;
            }

            // Check if the move is valid: There should not be more priests or devils than available in "Dame"
            if (ch == 0) {
                p2 = d2 = 0;
                for(i = 0; i < 6; i++) {
                    if(a[i] == 'p') p2++;
                    if(a[i] == 'd') d2++;
                }

                if (p1 > p2 || d1 > d2) {
                    if (p1 > p2) {
                        printf("\tPriests are less in Dame\n");
                    } else {
                        printf("\tDevils are less in Dame\n");
                    }
                    continue;  // Continue to next iteration to try again
                }

                for (i = 0; i < 2; i++) {
                    // Move selected character to the 'Ground'
                    for (j = 0; c[j] != '0'; j++);
                    c[j] = b[i];  // Place in 'Ground'
                    for (j = 0; a[j] != b[i]; j++);
                    a[j] = '0';   // Remove from 'Dame'
                }
                printf("\tMoved Priests and Devils to Ground\n\n");
                ch = 1; // Toggle to indicate we're moving back to Dame
            } else {
                p2 = d2 = 0;
                for(i = 0; i < 6; i++) {
                    if(c[i] == 'p') p2++;
                    if(c[i] == 'd') d2++;
                }

                if (p1 > p2 || d1 > d2) {
                    if (p1 > p2) {
                        printf("\tPriests are less in Ground\n");
                    } else {
                        printf("\tDevils are less in Ground\n");
                    }
                    continue;  // Continue to next iteration to try again
                }

                for (i = 0; i < 2; i++) {
                    // Move selected character back to 'Dame'
                    for (j = 0; a[j] != '0'; j++);
                    a[j] = b[i];  // Place in 'Dame'
                    for (j = 0; c[j] != b[i]; j++);
                    c[j] = '0';   // Remove from 'Ground'
                }
                printf("\tMoved Priests and Devils back to Dame\n\n");
                ch = 0; // Toggle back to indicate we're moving to Ground
            }

            if (is_game_over(a, c)) {
                print_game_state(a, c);
                printf("\nGAME OVER\n");

                char play_again;
                printf("\nWould you like to play again? (y/n): ");
                getchar();  // Consume newline left by previous scanf
                scanf("%c", &play_again);

                if (play_again == 'y' || play_again == 'Y') {
                    reset_game(a, c, &ch);  // Reset game if user wants to play again
                    continue; 
                } else {
                    return 0;  // End the program if user doesn't want to play again
                }
            }

            // Check for winning condition
            p1 = d1 = p2 = d2 = 0;
            for (i = 0; i < 6; i++) {
                if (c[i] == 'p') p1++;
                if (c[i] == 'd') d1++;
                if (a[i] == 'p') p2++;
                if (a[i] == 'd') d2++;
            }

            if (p1 == 3 && d1 == 3 && p2 == 0 && d2 == 0) {
                printf("\nCONGRATULATIONS! YOU WON!\n");
                printf("All 3 priests and 3 devils are safely in the first region.\n");
                printf("You have completed the game successfully.\n");

                char play_again;
                printf("\nWould you like to play again? (y/n): ");
                getchar();  // Consume newline left by previous scanf
                scanf("%c", &play_again);

                if (play_again == 'y' || play_again == 'Y') {
                    reset_game(a, c, &ch);  // Reset game if user wants to play again
                    continue; 
                } else {
                    return 0;  // End the program if user doesn't want to play again
                }
            }
        }
    }

    return 0;
}


